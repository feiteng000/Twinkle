<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Twinkle</title>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    <!-- bootstrap 3.0.2 -->
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!-- font Awesome -->
    <link href="css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <!-- Ionicons -->
    <link href="css/ionicons.min.css" rel="stylesheet" type="text/css" />
    <!-- Morris chart -->
    <link href="css/morris/morris.css" rel="stylesheet" type="text/css" />
    <!-- jvectormap -->
    <link href="css/jvectormap/jquery-jvectormap-1.2.2.css" rel="stylesheet" type="text/css" />
    <!-- fullCalendar -->
    <link href="css/fullcalendar/fullcalendar.css" rel="stylesheet" type="text/css" />
    <!-- Daterange picker -->
    <link href="css/daterangepicker/daterangepicker-bs3.css" rel="stylesheet" type="text/css" />
    <!-- bootstrap wysihtml5 - text editor -->
    <link href="css/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css" rel="stylesheet" type="text/css" />
    <!-- Theme style -->
    <link href="css/AdminLTE.css" rel="stylesheet" type="text/css" />
    <!-- 样式 -->
    <link href="css/index_my.css" rel="stylesheet" type="text/css" />
    <!-- 拾色器 -->
    <link rel="stylesheet" href="css/getColor.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
          <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body class="skin-blue">
    <!-- header logo: style can be found in header.less -->
    <header class="header">
        <a href="##" class="logo">
            <!-- Add the class icon to your logo image or logo icon to add the margining -->
            Twinkle
        </a>
        <!-- Header Navbar: style can be found in header.less -->
        <nav class="navbar navbar-static-top" role="navigation">
            <!-- Sidebar toggle button-->
            <div class="navbar-right">
                <ul class="nav navbar-nav">
                    <!-- Messages: style can be found in dropdown.less-->
                    <li class="dropdown messages-menu">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="fa fa-envelope"></i>
                            <span class="label label-success">4</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li class="header">4条未读消息</li>
                            <li>
                                <!-- inner menu: contains the actual data -->
                                <ul class="menu" id='menuList'></ul>
                            </li>
                            <li class="footer">
                                <a href="#">全部已读</a>
                            </li>
                        </ul>
                    </li>

                    <!-- User Account -->
                    <li class="dropdown user user-menu">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="glyphicon glyphicon-user"></i>
                            <span>用户名称
                                <i class="caret"></i>
                            </span>
                        </a>
                        <ul class="dropdown-menu">
                            <!-- User image -->
                            <li class="user-header bg-light-blue">
                                <img src="img/avatar3.png" class="img-circle" alt="User Image" />
                                <p>
                                    用户名 - 欢迎语
                                    <small>版本号</small>
                                </p>
                            </li>
                            <!-- Menu Body -->
                            <li class="user-body">
                                <div class="col-xs-4 text-center">
                                    <a href="#">关注</a>
                                </div>
                                <div class="col-xs-4 text-center">
                                    <a href="#">收益</a>
                                </div>
                                <div class="col-xs-4 text-center">
                                    <a href="#">粉丝</a>
                                </div>
                            </li>
                            <!-- Menu Footer-->
                            <li class="user-footer">
                                <div class="pull-left">
                                    <a href="#" class="btn btn-default btn-flat">设置</a>
                                </div>
                                <div class="pull-right">
                                    <a href="#" class="btn btn-default btn-flat">退出</a>
                                </div>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
    </header>
    <div class="wrapper row-offcanvas row-offcanvas-left">
        <!-- Left side column. contains the logo and sidebar -->
        <aside class="left-side sidebar-offcanvas">
            <!-- sidebar: style can be found in sidebar.less -->
            <section class="sidebar">
                <!-- Sidebar user panel -->
                <div class="user-panel">
                    <div class="pull-left image">
                        <img src="img/avatar3.png" class="img-circle" alt="User Image" />
                    </div>
                    <div class="pull-left info">
                        <p>你好, 用户名</p>

                        <!-- <a href="#"><i class="fa fa-circle text-success"></i> 在线</a> -->
                    </div>
                </div>
                <!-- search form -->
                <form action="#" method="get" class="sidebar-form">
                    <div class="input-group">
                        <input type="text" name="q" class="form-control" placeholder="搜索" />
                        <span class="input-group-btn">
                            <button type='submit' name='seach' id='search-btn' class="btn btn-flat">
                                <i class="fa fa-search"></i>
                            </button>
                        </span>
                    </div>
                </form>
                <!-- /.search form -->
                <!-- sidebar menu: : style can be found in sidebar.less -->
                <ul class="sidebar-menu" id="barList"></ul>
            </section>
            <!-- /.sidebar -->
        </aside>
        <!-- <div class="copyrights">Collect from
            <a href="http://www.cssmoban.com/" title="网站模板">网站模板</a>
        </div> -->

        <!-- Right side column. Contains the navbar and content of the page -->
        <aside class="right-side">
            <!-- Content Header (Page header) -->
            <section class="content-header">
                <h1>
                    工作台
                    <small>Twinkle</small>
                </h1>
                <!-- <ol class="breadcrumb">
                    <li>
                        <a href="#">
                            <i class="fa fa-dashboard"></i> Home</a>
                    </li>
                    <li class="active">Dashboard</li>
                </ol> -->
            </section>



            <!-- Main content -->
            <section class="content">


                <!-- 选中悬浮 -->
                <div id="suspension"></div>
                <!-- <div id="suspension2"></div> -->
                <!-- 选中悬浮 -->

                <!-- 拾色器 -->
                <!-- <div id="getColor">
                    <div id="picker"></div>
                    <div class="btn">
                        <div>取消</div>
                        <div>确定</div>
                    </div>
                </div> -->
                <!-- 拾色器 -->

                <div class="row">
                    <!-- 样式列表 -->
                    <div class="col-md-3">
                        <div class="box box-primary">
                            <div class="box-header">
                                <h3 class="box-title" id="showBarTitle"></h3>
                            </div>
                            <div class="box-body section">
                                <div class="styleList" id="styleList">
                                    <div style="width: 100%;height: 100px;background: green;margin-bottom: 10px;"></div>
                                    <div style="width: 100%;height: 100px;background: rgb(161, 9, 9);margin-bottom: 10px;"></div>
                                    <div style="width: 100%;height: 100px;background: orangered;margin-bottom: 10px;"></div>
                                    <div style="width: 100%;height: 100px;background: rgb(4, 4, 145);margin-bottom: 10px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- 样式列表 -->
                    <!-- 效果展示 -->
                    <div class="col-md-4">
                        <div class="box box-primary">
                            <div class="box-header">
                                <h3 class="box-title">效果展示</h3>
                            </div>
                            <div class="box-body section">
                                <div class="phone">
                                    <div class="screen" id="screen"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- 效果展示 -->
                    <!-- 设置 -->
                    <!-- <div class="col-md-3">
                        <div class="box box-primary">
                            <div class="box-header">
                                <h3 class="box-title">设置</h3>
                            </div>
                            <div class="box-body set_up">
                                <p>字体</p>
                                <div>
                                    <ul>
                                        <li>
                                            <p>大小</p>
                                            <div>
                                                <input type="text" name="" id="">
                                                <span>px</span>
                                            </div>
                                        </li>
                                        <li>
                                            <p>字间距</p>
                                            <div>
                                                <input type="text" name="" id="">
                                                <span>px</span>
                                            </div>
                                        </li>
                                        <li>
                                            <p>颜色</p>
                                            <div>
                                                <input type="text" name="" id="">
                                            </div>
                                        </li>
                                        <li>
                                            <p>对齐方式</p>
                                            <div class="nice-select" name="nice-select">
                                                <input type="text" value="左对齐" readonly>
                                                <ul>
                                                    <li data-value="左对齐">左对齐</li>
                                                    <li data-value="右对齐">右对齐</li>
                                                    <li data-value="居中">居中</li>
                                                </ul>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="box-footer set_up">
                                <p>边框</p>
                                <div>
                                    <ul>
                                        <li>
                                            <p>线宽</p>
                                            <div>
                                                <input type="text" name="" id="">
                                                <span>px</span>
                                            </div>
                                        </li>
                                        <li>
                                            <p>圆角</p>
                                            <div>
                                                <input type="text" name="" id="">
                                                <span>px</span>
                                            </div>
                                        </li>
                                        <li>
                                            <p>颜色</p>
                                            <div>
                                                <input type="text" name="" id="">
                                            </div>
                                        </li>
                                        <li>
                                            <p>类型</p>
                                            <div class="nice-select" name="nice-select">
                                                <input type="text" value="直线" readonly>
                                                <ul>
                                                    <li data-value="直线">直线</li>
                                                    <li data-value="点线">点线</li>
                                                    <li data-value="虚线">虚线</li>
                                                </ul>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="box-footer set_up">
                                <p>边距</p>
                                <div>
                                    <ul>
                                        <li>
                                            <p>上边距</p>
                                            <div>
                                                <input type="text" name="" id="">
                                                <span>px</span>
                                            </div>
                                        </li>
                                        <li>
                                            <p>下边距</p>
                                            <div>
                                                <input type="text" name="" id="">
                                                <span>px</span>
                                            </div>
                                        </li>
                                        <li>
                                            <p>左边距</p>
                                            <div>
                                                <input type="text" name="" id="">
                                                <span>px</span>
                                            </div>
                                        </li>
                                        <li>
                                            <p>右边距</p>
                                            <div>
                                                <input type="text" name="" id="">
                                                <span>px</span>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div> -->
                    <!-- 设置 -->
                    <!-- 代码 -->
                    <div class="col-md-5">
                        <div class="box box-primary">
                            <div class="box-header">
                                <h3 class="box-title">代码</h3>
                            </div>
                            <div class="box-body section">
                                <textarea id="code"></textarea>
                            </div>
                        </div>
                    </div>
                    <!-- 代码 -->
                </div>
            </section>
            <!-- /.content -->
        </aside>
        <!-- /.right-side -->
    </div>
    <!-- ./wrapper -->



    <!-- add new calendar event modal -->
    <!-- More Templates
    <a href="http://www.cssmoban.com/" target="_blank" title="模板之家">模板之家</a> - Collect from
    <a href="http://www.cssmoban.com/" title="网页模板" target="_blank">网页模板</a> -->



    <!-- jQuery 2.0.2 -->
    <script src="js/jquery.min.js"></script>
    <!-- jQuery UI 1.10.3 -->
    <script src="js/jquery-ui-1.10.3.min.js" type="text/javascript"></script>
    <!-- Bootstrap -->
    <script src="js/bootstrap.min.js" type="text/javascript"></script>
    <!-- Morris.js charts -->
    <script src="js/raphael-min.js"></script>
    <script src="js/plugins/morris/morris.min.js" type="text/javascript"></script>
    <!-- Sparkline -->
    <script src="js/plugins/sparkline/jquery.sparkline.min.js" type="text/javascript"></script>
    <!-- jvectormap -->
    <script src="js/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js" type="text/javascript"></script>
    <script src="js/plugins/jvectormap/jquery-jvectormap-world-mill-en.js" type="text/javascript"></script>
    <!-- fullCalendar -->
    <script src="js/plugins/fullcalendar/fullcalendar.min.js" type="text/javascript"></script>
    <!-- jQuery Knob Chart -->
    <script src="js/plugins/jqueryKnob/jquery.knob.js" type="text/javascript"></script>
    <!-- daterangepicker -->
    <script src="js/plugins/daterangepicker/daterangepicker.js" type="text/javascript"></script>
    <!-- Bootstrap WYSIHTML5 -->
    <script src="js/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js" type="text/javascript"></script>
    <!-- iCheck -->
    <script src="js/plugins/iCheck/icheck.min.js" type="text/javascript"></script>

    <!-- AdminLTE App -->
    <script src="js/AdminLTE/app.js" type="text/javascript"></script>

    <!-- AdminLTE dashboard demo (This is only for demo purposes) -->
    <script src="js/AdminLTE/dashboard.js" type="text/javascript"></script>

    <script src="js/getColor.js"></script>


    <script type="text/javascript">
        // 表单
        $('[name="nice-select"]').click(function (e) {
            $('[name="nice-select"]').find('ul').hide();
            $(this).find('ul').show();
            e.stopPropagation();
        });
        $('[name="nice-select"] li').hover(function (e) {
            $(this).toggleClass('on');
            e.stopPropagation();
        });
        $('[name="nice-select"] li').click(function (e) {
            var val = $(this).text();
            $(this).parents('[name="nice-select"]').find('input').val(val);
            $('[name="nice-select"] ul').hide();
            e.stopPropagation();
        });
        $(document).click(function () {
            $('[name="nice-select"] ul').hide();
        });
    </script>





    <!--*************************主体代码*****************************-->
    <script type="text/javascript">
        var barList = [     //左侧导航列表
            { id: '1', name: '底部导航栏', icon: 'fa-bars', numberColor: 'red', new: '', active: 'active' },
            { id: '2', name: '轮播图', icon: 'fa-picture-o', numberColor: 'red', new: '', active: '' },
            { id: '3', name: '搜索栏', icon: 'fa-search', numberColor: 'red', new: '', active: '' },
            { id: '4', name: '快捷导航', icon: 'fa-rocket', numberColor: 'red', new: '', active: '' },
            { id: '5', name: '图文卡片', icon: 'fa-file-text', numberColor: 'red', new: '', active: '' },
            { id: '6', name: '图文详情', icon: 'fa-paste', numberColor: 'red', new: '', active: '' },
            { id: '7', name: '列表', icon: 'fa-th-list', numberColor: 'red', new: '', active: '' },
            { id: '8', name: '聊天', icon: 'fa-comments-o', numberColor: 'red', new: '', active: '' },
            { id: '9', name: '完整页面', icon: 'fa-list-alt', numberColor: 'red', new: '', active: '' },
            { id: '10', name: '完整项目', icon: 'fa-suitcase', numberColor: 'red', new: '', active: '' },
            { id: '11', name: '定制开发', icon: 'fa-star', numberColor: 'red', new: '', active: '' },
        ];
        var menuList = [    //消息列表
            { id: '1', name: '昵称1', img: 'img/avatar3.png', time: ' 5 分钟前', message: '哈哈哈', },
            { id: '2', name: '昵称2', img: 'img/avatar3.png', time: ' 5 分钟前', message: '哈哈哈', },
            { id: '3', name: '昵称3', img: 'img/avatar3.png', time: ' 5 分钟前', message: '哈哈哈', },
            { id: '4', name: '昵称4', img: 'img/avatar3.png', time: ' 5 分钟前', message: '哈哈哈', },
        ]
        var item = "<li><a href='#'><div class='pull-left'><img src='img/avatar3.png' class='img-circle' alt='用户头像' /></div><h4>昵称<small><i class='fa fa-clock-o'></i> 5 分钟前</small></h4><p>消息消息消息消息</p></a></li>"
        $('#barList').html()
        //加载左侧列表
        function getBar() {
            $('#showBarTitle').html(barList[0].name)
            for (var i = 0; i < barList.length; i++) {
                var item = "<li class='" + barList[i].active + "'><a href='#' onclick='changeBar(" + barList[i].id + "," + i + ")'><i class='fa " + barList[i].icon + "'></i><span>" + barList[i].name + "</span><small class='badge pull-right bg-" + barList[i].numberColor + "'>" + barList[i].new + "</small></a></li>"
                $('#barList').append(item)
            }
        }
        getBar()
        //切换左侧导航栏列表
        function changeBar(id, index) {
            $('#showBarTitle').html(barList[index].name)
            $('#barList').children('li').eq(index).addClass('active').siblings('li').removeClass('active')
        }
        //消息列表
        function getMenu() {
            for (var i = 0; i < menuList.length; i++) {
                var item = "<li><a href='#'><div class='pull-left'><img src='" + menuList[i].img + "' class='img-circle' alt='用户头像' /></div><h4>" + menuList[i].name + "<small><i class='fa fa-clock-o'></i>" + menuList[i].time + "</small></h4><p>" + menuList[i].message + "</p></a></li>"
                $('#menuList').append(item)
            }
        }
        getMenu()
        //格式化代码
        function format(strs) {
            //声明left变量用于存放html标签中左尖括号（‘<’）位置
            var left = null;
            //声明right变量用于存放html标签中右尖括号（‘<’）位置
            var right = null;
            //声明str变量，用于存放格式化后的代码字符串
            var str = '';
            //存放html代码所进所用的空格
            var blank = '\t';
            //存放若干个blank变量，用于控制代码缩进的深度
            var fmt = [];
            //对需要格式化的代码字符串进行遍历
            for (var i = 0; i < strs.length; i++) {
                //发现左尖括号后将其位置记录在left变量上
                if (strs[i] == '<') {
                    left = i;
                } else if (strs[i] == '>') {
                    //发现右尖括号后将其记录在right变量上
                    right = i;
                }
                //当做尖括号右尖括号都记录了一个位置后，说明二者之间的内容为代码的一行
                if (typeof left == 'number' && typeof right == 'number') {
                    //判断字符串左尖括号后是否为‘/’，如果满足，表明该行代码为双标签的闭合标签
                    if (strs[left + 1] == '/') {
                        //对数组中的空格做出栈，确保代码缩进正确
                        fmt.pop();
                        //将该行代码放入str变量中
                        str += fmt.join('') + strs.slice(left, right + 1);
                        //判断字符串右尖括号前一位是否为‘/’，如满足，表明该标签为严格闭合的单标签
                    } else if (strs[right - 1] == '/') {
                        str += fmt.join('') + strs.slice(left, right + 1);
                        //判断字符串开头是否包含input/imig/hr/br/link/meta等字母，用于屏蔽非严格未闭合的单标签
                    } else if (strs.slice(left, right).search(/\<input|\<img|\<hr|\<br|\<link|\<meta/) != -1) {
                        str += fmt.join('') + strs.slice(left, right + 1);
                        //对双标签的左标签进行的操作
                    } else {
                        str += fmt.join('') + strs.slice(left, right + 1);
                        //向数组中堆入一个空格，确保下一行双标签的左标签的缩进正确
                        fmt.push(blank);
                    }
                    //对right位置后的字符串进行遍历
                    for (var j = right; j < strs.length; j++) {
                        //查找right位置后，第一个左尖括号的位置，二者之间的内容即为代码中的文本内容
                        if (strs[j] == '<') {
                            //去掉文本中多余的空格
                            var s = strs.slice(right + 1, j).replace(/\s*/g, '');
                            if (s) {
                                //当文本中去掉空格后任然有内容，则将文本拼入str变量进行存储
                                str += s;
                            }
                            break;
                        }
                    }
                    //每次获得一次左右尖括号的位置后，即得到了一行代码，为代码做换行处理
                    str += '\n';
                    //重置left、right的值，用于for循环的下次存储做右尖括号的位置
                    left = null;
                    right = null;
                }

            }
            console.log(str)
            //返回得到的格式化完成的html代码字符串
            return str;
        }



        //-------------------------样式版块拖动------------------------
        //获取展示区域高度  判断是否移动到该区域中
        var showBoxT = $('#screen').offset().top    //上边距
        var showBoxL = $('#screen').offset().left   //左边距
        var showBoxH = $('#screen').outerHeight()   //高度
        var showBoxW = $('#screen').outerWidth()    //宽度
        //拖动效果
        var dragJob = false;    //是否跟随鼠标移动
        var moveBoxH = 0      //选中模块高
        var moveBoxW = 0       //选中模块宽
        var mouseT = 0         //鼠标位置  上边距
        var mouseL = 0         //鼠标位置  左边距
        var html = ''           //选中木模块html
        //鼠标按下样式模块  获取模块宽高和位置，并将其添加到移动div中
        $('#styleList').children('div').on('mousedown', function () {
            html = $(this).prop("outerHTML")            //要添加模块代码
            $('#suspension').append(html)               //将代码添加到移动div
            moveBoxH = $(this).outerHeight()
            moveBoxW = $(this).outerWidth()
            var top = $(this).offset().top
            var left = $(this).offset().left
            $('#suspension').css('top', top)
            $('#suspension').css('left', left)
            dragJob = true;
        })
        //当鼠标拖动模块时  给移动div定位
        $(document).on('mousemove', function (ev) {
            if (dragJob) {
                var lastx = ev.pageX - moveBoxW / 2;
                var lasty = ev.pageY - moveBoxH / 2;
                mouseT = ev.pageY
                mouseL = ev.pageX
                $('#suspension').css('top', lasty)
                $('#suspension').css('left', lastx)
            }
        })
        //鼠标抬起  清空移动div内容     判断是否添加到展示区域
        $(document).on('mouseup', function () {
            dragJob = false;
            $('#suspension').html('')
            var x = showBoxL + showBoxW
            var y = showBoxT + showBoxH
            if (mouseT > showBoxT && mouseT < y && mouseL > showBoxL && mouseL < x) {
                $('#screen').append(html)           //添加代码到展示区域
                var text = $('#screen').html()      //获取展示区域html
                var codeHtml = format(text)         //格式化html
                $('#code').text(codeHtml)           //添加代码到代码区域
                var scrollHeight = $('#screen').prop("scrollHeight");   //获取展示区域内部高度
                $('#screen').animate({scrollTop:scrollHeight},500);    //滚到到底部
            }
            html = ''
            // 测试范围
            // $('#suspension2').css('top', showBoxT)
            // $('#suspension2').css('left', showBoxL)
            // $('#suspension2').css('width', showBoxW)
            // $('#suspension2').css('height', showBoxH)
        })
        //--------------------------样式版块拖动------------------------





    </script>
    <!--*****************************主体代码 ***************************-->



</body>

</html>